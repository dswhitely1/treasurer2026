#!/bin/sh
# Pre-push hook - runs TypeScript type checking before push
# Ensures type safety is maintained across all commits being pushed

. "$(dirname "$0")/_/husky.sh"

echo "Running type checking in treasurer-api..."
pnpm --filter treasurer-api type-check || {
  echo ""
  echo "Type checking failed in treasurer-api. Please fix the issues and try again."
  exit 1
}

echo "Type checking complete for treasurer-api."
echo ""
echo "Running type checking in treasurer..."
pnpm --filter treasurer type-check || {
  echo ""
  echo "Type checking failed in treasurer. Please fix the issues and try again."
  exit 1
}

echo "Type checking complete for treasurer."
echo ""
echo "All type checks passed. Proceeding with push."
